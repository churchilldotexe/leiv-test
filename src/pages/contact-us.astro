---
import Layout from "src/layouts/Layout.astro";
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";
import { getBlurStyle } from "@utils/imageOptimization";
import ApplicationLogosCarousel from "@components/ApplicationLogosCarousel.astro";
import HireBtn from "@components/HireBtn.astro";

import Step1 from "@assets/images/steps/step-1.png";
import Step2 from "@assets/images/steps/step-2.png";
import Step3 from "@assets/images/steps/step-3.png";

import s3Bg from "@assets/images/bg/section-bg-3.png";
import heroBg from "@assets/images/bg/hero-bg.png";
import reservation from "@assets/images/reservation.png";
import reservationBlur from "@assets/images/reservation-blur.png";
import VerticalTestimonial from "@components/VerticalTestimonial.astro";
import OptimizedImage from "@components/OptimizedImage.astro";
import ImageWithBlur from "@components/ImageWithBlur.astro";
import TestimonialsCarousel from "@components/TestimonialsCarousel.astro";
---

<Layout preloadedImage={s3Bg}>
  <section id="main-services" class="relative overflow-clip py-section pb-20">
    <div
      class="relative mx-auto flex w-full flex-col gap-[clamp(2rem,4vw,3rem)]"
    >
      <div
        class="mask-bg-3-vertical grid w-full grid-rows-[1fr,1fr] gap-9.5 lg:max-h-240.25 lg:grid-cols-[1fr_.5fr]"
      >
        <div
          class="flex max-h-[inherit] max-w-200 items-center justify-center pt-10 lg:max-w-295 lg:pt-0 lg:pl-10"
        >
          <ImageWithBlur
            blurSrc={reservationBlur.src}
            src={reservation}
            alt={"reservation form but image"}
          />
        </div>
        <div>
          <div class="hidden lg:contents">
            <VerticalTestimonial className="pr-10" />
          </div>
          <div class="contents lg:hidden">
            <TestimonialsCarousel />
          </div>
        </div>
      </div>
    </div>

    <Image
      src={heroBg}
      alt={"blur for bg"}
      class={"absolute inset-0 w-full h-full -z-1  "}
    />
  </section>

  <section
    class="relative z-1 overflow-x-clip px-4 pt-38 pb-[clamp(7.5rem,25.95vw,9em)] text-center"
  >
    <div
      class="w-fll m-auto flex max-w-360 flex-wrap items-center justify-center gap-12"
    >
      <div class="w-full max-w-274.75">
        <h3
          class="relative mb-12.5 w-full text-center font-roboto text-[clamp(1.4375rem,5.4vw,2.1875rem)] leading-h font-normal tracking-normal text-pretty text-primary"
        >
          We don’t just match — we support you long after the hire.
          <br />
          <br />
          From ongoing assistant coaching to workflow optimization, we’re here to
          help you build a backend that scales with you.
        </h3>

        <HireBtn />
      </div>
    </div>

    <Image
      src={s3Bg}
      alt={"blur for bg"}
      class={"absolute inset-0 w-full h-full -z-1  "}
    />
  </section>

  <ApplicationLogosCarousel />
</Layout>

<style>
  .service-grid {
    display: grid;
  }

  .service-grid {
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
    place-content: center;
    gap: 4.0625rem;
    grid-template-areas:
      "step1"
      "step2"
      "step3";
  }

  @media (width >= 60rem) {
    .service-grid {
      grid-template-columns: repeat(2, auto);
      grid-template-rows: 1fr 1fr;
      align-items: center;
      grid-template-areas:
        "step1 step2"
        "step1 step3";
    }
    #app-service {
      background-color: #ededed;
    }
  }
  @media (width >= 90rem) {
    .service-grid {
      grid-template-columns: repeat(3, auto);
      grid-template-rows: 1fr auto 5.9375rem;
      place-content: center;
      grid-template-areas:
        ". step2 ."
        "step1 step2 step3"
        "step1 . step3";
    }
  }
  .step-shadow {
    /* Ellipse 1 */
    /* background: rgba(219, 210, 210, 0.75); */
    box-shadow: 0px 4px 40px rgba(0, 0, 0, 0.25);
  }
</style>
