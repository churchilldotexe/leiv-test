---
import Layout from "src/layouts/Layout.astro";
import { Image } from "astro:assets";

import ServiceCard from "@components/ServiceCard.astro";

import Step1 from "@assets/images/steps/step-1.png";
import Step2 from "@assets/images/steps/step-2.png";
import Step3 from "@assets/images/steps/step-3.png";

import s3Bg from "@assets/images/bg/section-bg-3.png";
import heroBg from "@assets/images/bg/hero-bg.png";
import ApplicationLogosCarousel from "@components/ApplicationLogosCarousel.astro";
import HireBtn from "@components/HireBtn.astro";
import type { ImageMetadata } from "astro";

interface StepCard {
  title: string;
  Icon: ImageMetadata;
  description: string;
}

const stepCards: StepCard[] = [
  {
    title: "Sign up",
    Icon: Step1,
    description:
      "Fill out a short form to book a discovery call and share your business details.",
  },
  {
    title: "Tell us what you need",
    Icon: Step2,
    description:
      "We’ll match you with the top 3 assistants perfectly suited to your needs based on our discovery call.",
  },
  {
    title: "Onboard your assistant",
    Icon: Step3,
    description:
      "All you need to do is sit back, relax, and enjoy having your time back — your new virtual assistant will handle the rest.",
  },
];
---

<Layout preloadedImage={heroBg}>
  <section
    id="main-services"
    class="relative z-1 overflow-clip px-4 py-section pb-20"
  >
    <div
      class="mx-auto flex w-full max-w-176 flex-col gap-[clamp(2rem,4vw,3rem)] md:max-w-7xl"
    >
      <div class="mx-auto max-w-226.5">
        <span
          class="mb-6 block text-center font-roboto text-base leading-h font-bold tracking-widest text-accent uppercase"
        >
          Use case
        </span>

        <h2
          class="m-0 mb-6 bg-linear-to-r from-primary to-accent bg-clip-text text-center font-roboto text-[clamp(2.5rem,5vw,3.0625rem)] leading-h font-bold tracking-normal text-transparent"
        >
          3 STEPS ONLY
        </h2>
        <p
          class="m-0 mb-12 w-full max-w-155.75 text-center font-roboto text-base leading-p text-tertiary"
        >
          Hiring doesn’t have to be hard.
          <br />
          We’ve designed a seamless 3-step process to get you matched with the top
          1% of global virtual assistants — fast. No long onboarding. No guessing.
          Just efficient, reliable support that helps your business grow.
        </p>
        <HireBtn />
      </div>
      <!-- grid-cols-[repeat(auto-fit,minmax(min(413.33px,100%),1fr))] -->
      <!-- sm:grid-cols-2 lg:grid-cols-6 lg:grid-rows-2 -->

      <div class="">
        <div class="service-grid w-full">
          {
            stepCards.map(({ title, Icon, description }, i) => (
              <ServiceCard
                class="relative w-full px-5 xl:px-10 2xl:px-15"
                style={`grid-area:step${i + 1}`}
              >
                <Fragment slot="title">
                  <span class="italic">{title}</span>
                </Fragment>
                <Fragment slot="content">
                  <div class="w-33.5 rounded-full border border-border p-5">
                    <Image
                      src={Icon}
                      alt={title}
                      class="aspect-square h-auto w-30"
                    />
                  </div>
                </Fragment>
                <Fragment slot="footer">
                  <p class="m-0 mt-6 w-full text-center font-roboto text-base leading-p text-tertiary">
                    {description}
                  </p>
                  <div class="step-shadow absolute -top-4 -left-4 grid aspect-square place-content-center rounded-full bg-[#dbd2d2] p-4 font-roboto text-sm font-bold text-white xl:-top-8 xl:-left-8">
                    <span class="pb-8 text-[20px] leading-0 font-bold text-[#828181] uppercase">
                      step{" "}
                    </span>
                    <span class="text-center text-[2rem] leading-0 text-primary">
                      {i + 1}
                    </span>
                  </div>
                </Fragment>
              </ServiceCard>
            ))
          }
        </div>
      </div>
    </div>

    <Image
      src={heroBg}
      alt={"blur for bg"}
      class={"absolute inset-0 w-full h-full -z-1  "}
    />
  </section>

  <section
    class="relative z-1 overflow-x-clip px-4 pt-38 pb-[clamp(7.5rem,25.95vw,9em)] text-center"
  >
    <div
      class="w-fll m-auto flex max-w-360 flex-wrap items-center justify-center gap-12"
    >
      <div class="w-full max-w-274.75">
        <h3
          class="relative mb-12.5 w-full text-center font-roboto text-[clamp(1.4375rem,5.4vw,2.1875rem)] leading-h font-normal tracking-normal text-pretty text-primary"
        >
          We don’t just match — we support you long after the hire.
          <br />
          <br />
          From ongoing assistant coaching to workflow optimization, we’re here to
          help you build a backend that scales with you.
        </h3>

        <HireBtn />
      </div>
    </div>

    <Image
      src={s3Bg}
      alt={"blur for bg"}
      class={"absolute inset-0 w-full h-full -z-1  "}
    />
  </section>

  <ApplicationLogosCarousel />
</Layout>

<style>
  .service-grid {
    display: grid;
  }

  .service-grid {
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
    place-content: center;
    gap: 4.0625rem;
    grid-template-areas:
      "step1"
      "step2"
      "step3";
  }

  @media (width >= 60rem) {
    .service-grid {
      grid-template-columns: repeat(2, auto);
      grid-template-rows: 1fr 1fr;
      align-items: center;
      grid-template-areas:
        "step1 step2"
        "step1 step3";
    }
    #app-service {
      background-color: #ededed;
    }
  }
  @media (width >= 90rem) {
    .service-grid {
      grid-template-columns: repeat(3, auto);
      grid-template-rows: 1fr auto 5.9375rem;
      place-content: center;
      grid-template-areas:
        ". step2 ."
        "step1 step2 step3"
        "step1 . step3";
    }
  }
  .step-shadow {
    /* Ellipse 1 */
    /* background: rgba(219, 210, 210, 0.75); */
    box-shadow: 0px 4px 40px rgba(0, 0, 0, 0.25);
  }
</style>
